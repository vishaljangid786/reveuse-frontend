import{r as e,j as t,b as a}from"./index.DDD9Gsjv.js";import{H as r}from"./Heading.B7wUWUY9.js";const l=()=>{const[l,n]=e.useState({title:"",content:"",image:null}),[o,s]=e.useState(null),[i,d]=e.useState(!1),[c,g]=e.useState(""),[u,m]=e.useState(!1),b=e=>{const{name:t,value:a,files:r}=e.target;"image"===t&&r.length>0?x(r[0]):n(e=>({...e,[t]:a}))},x=e=>{n(t=>({...t,image:e})),s(URL.createObjectURL(e))},p=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?m(!0):"dragleave"===e.type&&m(!1)};return t.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-white shadow-2xl rounded-2xl mt-10",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:t.jsx(r,{text1:"Create",text2:"Blog"})}),t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),d(!0),g("");const t=localStorage.getItem("token");if(!t)return g("You must be logged in to create a blog."),void d(!1);const r=new FormData;if(r.append("title",l.title),r.append("content",l.content),!l.image)return g("Please upload an image."),void d(!1);r.append("image",l.image);try{const e=await fetch(`${a}/api/blogs`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:r});if(!e.ok){const t=await e.json().catch(()=>({error:"Failed to create blog and could not parse error response."}));throw new Error(t.error||"Failed to create blog. Please try again.")}await e.json();g("Blog created successfully!"),n({title:"",content:"",image:null}),s(null)}catch(o){g(o.message||"Failed to create blog. Please try again."),console.error("Error creating blog:",o)}finally{d(!1)}},onDragEnter:p,onDragOver:p,onDragLeave:p,onDrop:e=>{e.preventDefault(),e.stopPropagation(),m(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&x(e.dataTransfer.files[0])},className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),t.jsx("input",{type:"text",name:"title",placeholder:"Enter blog title",value:l.title,onChange:b,required:!0,className:"mt-1 w-full p-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),t.jsx("textarea",{name:"content",placeholder:"Write your blog content here",value:l.content,onChange:b,required:!0,rows:"6",className:"mt-1 w-full p-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image"}),t.jsxs("div",{className:"w-full p-6 border-2 border-dashed rounded-lg text-center transition "+(u?"border-blue-600 bg-blue-50":"border-gray-400"),children:[t.jsxs("p",{className:"mb-2 text-gray-500",children:["Drag & drop an image here, or"," ",t.jsx("span",{className:"text-blue-600 underline",children:"browse"})]}),t.jsxs("label",{className:"inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-lg cursor-pointer hover:bg-gray-300 transition duration-200",children:["Choose File",t.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:b,className:"hidden"})]})]}),o&&t.jsx("img",{loading:"lazy",src:o,alt:"Preview",className:"mt-4 rounded-lg w-full h-48 object-cover"})]}),t.jsx("button",{type:"submit",disabled:i,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-300",children:i?"Creating...":"Create Blog"})]}),c&&t.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:c})]})};export{l as default};
//# sourceMappingURL=BlogForm.DbwUjvRp.js.map
