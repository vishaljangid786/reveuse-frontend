import{r as e,b as t,j as l,a as r}from"./index.yGxPK-9h.js";import{H as s}from"./Heading.oHcWjq6c.js";const a=()=>{const[a,n]=e.useState([]),[o,i]=e.useState(!1),[c,d]=e.useState(null),[x,m]=e.useState(!0),[g,h]=e.useState({title:"",content:"",imageUrl:""});e.useEffect(()=>{b()},[]);const b=async()=>{m(!0);try{const e=await fetch(`${t}/api/blogs`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const l=await e.json();n(l)}catch(e){console.error(e)}finally{m(!1)}},u=e=>{const{name:t,value:l}=e.target;h(e=>({...e,[t]:l}))};return l.jsxs("div",{className:"max-w-5xl min-h-screen mx-auto px-4 py-10",children:[l.jsx(s,{text1:"All",text2:"Blog"}),x?l.jsx(r,{}):a.length>0?l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(e=>l.jsxs("div",{className:"bg-white shadow-md rounded-xl p-5 space-y-3",children:[e.imageUrl&&l.jsx("img",{loading:"lazy",src:e.imageUrl.startsWith("http")?e.imageUrl:`${t}${e.imageUrl}`,alt:e.title,className:"w-full h-48 object-cover rounded-md"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),l.jsxs("p",{className:"text-gray-600",children:[e.content.slice(0,100),"..."]}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mt-2",children:[l.jsxs("span",{children:["ðŸ‘ ",e.likes]}),l.jsxs("span",{children:["ðŸ’¬ ",e?.comments?.length||0]}),l.jsxs("span",{children:["ðŸ“… ",new Date(e.createdAt).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"text-white-600 hover:bg-transparent bg-yellow-400 border-2 border-yellow-400  text-white px-4 rounded hover:text-yellow-400 transition cursor-pointer",onClick:()=>(e=>{d(e),h({title:e.title,content:e.content,imageUrl:e.imageUrl}),i(!0)})(e),children:"Edit"}),l.jsx("button",{className:"bg-red-500 text-white border-2 border-red-500 hover:bg-transparent hover:text-red-500 px-4 rounded cursor-pointer",onClick:()=>(e=>{window.confirm("Are you sure you want to delete this blog?")&&fetch(`${t}/api/blogs/${e._id}`,{method:"DELETE"}).then(e=>{if(!e.ok)throw new Error("Delete failed");b()}).catch(e=>{console.error("Delete error:",e)})})(e),children:"Delete"})]})]},e._id))}):l.jsx("p",{className:"text-center",children:"No Blogs yet."}),o&&l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl w-[90%] max-w-2xl shadow-xl relative",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 border-b pb-2",children:"âœï¸ Edit Blog"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Title",l.jsx("input",{type:"text",name:"title",value:g.title,onChange:u,placeholder:"Blog title...",className:"mt-1 w-full border border-gray-300 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),l.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Content",l.jsx("textarea",{name:"content",value:g.content,onChange:u,placeholder:"Blog content...",rows:5,className:"mt-1 w-full border border-gray-300 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mt-2",children:["Change Image",l.jsx("input",{type:"file",accept:"image/*",onChange:e=>h({...g,newImageFile:e.target.files[0]}),className:"mt-1 block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[l.jsx("button",{className:"bg-gray-300 border-2 border-gray-300 hover:bg-transparent cursor-pointer hover:text-red-500  text-gray-800 px-5 py-2 rounded-lg transition-all",onClick:()=>i(!1),children:"Cancel"}),l.jsx("button",{className:"bg-blue-600 border-2 border-blue-600 cursor-pointer hover:bg-transparent hover:text-blue-600 text-white px-5 py-2 rounded-lg transition-all",onClick:()=>{if(!c)return;const e=new FormData;e.append("title",g.title),e.append("content",g.content),e.append("imageUrl",g.imageUrl),g.newImageFile&&e.append("image",g.newImageFile),fetch(`${t}/api/blogs/${c._id}`,{method:"PUT",body:e}).then(e=>{if(!e.ok)throw new Error("Update failed");return e.json()}).then(()=>{b(),i(!1),h({title:"",content:"",imageUrl:""}),d(null)}).catch(e=>{console.error("Update error:",e)})},children:"Save Changes"})]})]})})]})};export{a as default};
//# sourceMappingURL=AllBlog.Bof0BQcG.js.map
