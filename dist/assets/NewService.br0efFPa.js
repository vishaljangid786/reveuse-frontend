import{r as e,j as r,b as t}from"./index.yGxPK-9h.js";import{H as a}from"./Heading.oHcWjq6c.js";const i=()=>{const[i,s]=e.useState({title:"",description:"",image:null,details:[{head:"",description:""},{head:"",description:""},{head:"",description:""},{head:"",description:""}]}),l=(e,r,t)=>{const a=[...i.details];a[e][r]=t,s(e=>({...e,details:a}))},[n,o]=e.useState(null),[d,c]=e.useState(!1),[u,g]=e.useState(""),[m,p]=e.useState(!1),x=e=>{const{name:r,value:t,files:a}=e.target;"image"===r&&a.length>0?b(a[0]):s(e=>({...e,[r]:t}))},b=e=>{s(r=>({...r,image:e})),o(URL.createObjectURL(e))},h=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?p(!0):"dragleave"===e.type&&p(!1)};return r.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white shadow-2xl rounded-2xl mt-10",children:[r.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:r.jsx(a,{text1:"Create",text2:"New Service"})}),r.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0),g("");const r=new FormData;if(r.append("title",i.title),r.append("details",JSON.stringify(i.details)),r.append("description",i.description),!i.image)return g("Please upload an image."),void c(!1);r.append("image",i.image);try{const e=await fetch(`${t}/api/services`,{method:"POST",body:r}),a=await e.json();if(!e.ok)throw new Error(a.error||"Failed to create service");g("Service created successfully!"),s({title:"",description:"",image:null,details:[{head:"",description:""},{head:"",description:""},{head:"",description:""},{head:"",description:""}]}),o(null)}catch(a){g(a.message||"Error creating service. Please try again."),console.error("Error creating service:",a)}finally{c(!1)}},onDragEnter:h,onDragOver:h,onDragLeave:h,onDrop:e=>{e.preventDefault(),e.stopPropagation(),p(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&b(e.dataTransfer.files[0])},className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xl mulish font-medium text-gray-700 mb-2",children:"Service Title"}),r.jsx("input",{type:"text",placeholder:"Enter Service Title",name:"title",value:i.title,onChange:x,required:!0,className:"w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xl mulish font-medium text-gray-700 mb-2",children:"Service Description"}),r.jsx("textarea",{name:"description",placeholder:"Write a detailed description of the service",value:i.description,onChange:x,required:!0,rows:"4",className:"w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xl mulish font-medium text-gray-700 mb-1",children:"Service Image"}),r.jsxs("div",{className:"w-full p-6 border-2 border-dashed rounded-lg text-center transition duration-300 "+(m?"border-blue-600 bg-blue-50":"border-gray-400"),children:[r.jsxs("p",{className:"mb-2 text-gray-500",children:["Drag & drop an image here, or"," ",r.jsx("span",{className:"text-blue-600 underline cursor-pointer",children:"browse"})]}),r.jsxs("label",{className:"inlinetext-xl mulishbg-gray-200 text-gray-800 px-6 py-2 rounded-lg cursor-pointer hover:bg-gray-300 transition duration-200",children:["Choose File",r.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:x,className:"hidden"})]})]}),n&&r.jsx("img",{loading:"lazy",src:n,alt:"Preview",className:"mt-4 rounded-lg w-full h-48 object-cover"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("label",{className:"block text-xl mulish font-semibold text-gray-800 mb-4",children:"Service Details"}),i.details?.map((e,t)=>r.jsxs("div",{className:"p-6 bg-white shadow-lg rounded-lg border border-gray-200 hover:shadow-xl transition-all duration-300",children:[r.jsx("div",{className:"mb-4",children:r.jsx("input",{type:"text",placeholder:`Heading ${t+1}`,value:e.head,onChange:e=>l(t,"head",e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-lg text-lg font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300",required:!0})}),r.jsx("div",{children:r.jsx("textarea",{placeholder:`Description ${t+1}`,value:e.description,onChange:e=>l(t,"description",e.target.value),rows:"4",className:"w-full p-3 border-2 border-gray-300 rounded-lg text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300",required:!0})})]},t))]}),r.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-500 transition duration-300",children:d?"Creating...":"Create Service"})]}),u&&r.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:u})]})};export{i as default};
//# sourceMappingURL=NewService.br0efFPa.js.map
