{"version":3,"file":"NewService.br0efFPa.js","sources":["../../src/Pages/admin/NewService.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { backendurl } from \"../../App\";\r\nimport Heading from \"../../components/Heading\";\r\n\r\nconst NewService = () => {\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    image: null,\r\n    details: [\r\n      { head: \"\", description: \"\" },\r\n      { head: \"\", description: \"\" },\r\n      { head: \"\", description: \"\" },\r\n      { head: \"\", description: \"\" },\r\n    ],\r\n  });\r\n\r\n  const handleDetailChange = (index, field, value) => {\r\n    const updatedDetails = [...formData.details];\r\n    updatedDetails[index][field] = value;\r\n    setFormData((prev) => ({ ...prev, details: updatedDetails }));\r\n  };\r\n\r\n  const [preview, setPreview] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [dragActive, setDragActive] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (name === \"image\" && files.length > 0) {\r\n      handleImage(files[0]);\r\n    } else {\r\n      setFormData((prev) => ({ ...prev, [name]: value }));\r\n    }\r\n  };\r\n\r\n  const handleImage = (file) => {\r\n    setFormData((prev) => ({ ...prev, image: file }));\r\n    setPreview(URL.createObjectURL(file));\r\n  };\r\n\r\n  const handleDrag = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\r\n      setDragActive(true);\r\n    } else if (e.type === \"dragleave\") {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragActive(false);\r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      handleImage(e.dataTransfer.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n\r\n    const data = new FormData();\r\n    data.append(\"title\", formData.title);\r\n    data.append(\"details\", JSON.stringify(formData.details));\r\n    data.append(\"description\", formData.description);\r\n\r\n    if (formData.image) {\r\n      data.append(\"image\", formData.image);\r\n    } else {\r\n      setMessage(\"Please upload an image.\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${backendurl}/api/services`, {\r\n        method: \"POST\",\r\n        body: data,\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(result.error || \"Failed to create service\");\r\n      }\r\n\r\n      setMessage(\"Service created successfully!\");\r\n      setFormData({\r\n        title: \"\",\r\n        description: \"\",\r\n        image: null,\r\n        details: [\r\n          { head: \"\", description: \"\" },\r\n          { head: \"\", description: \"\" },\r\n          { head: \"\", description: \"\" },\r\n          { head: \"\", description: \"\" },\r\n        ],\r\n      });\r\n      setPreview(null);\r\n    } catch (error) {\r\n      setMessage(error.message || \"Error creating service. Please try again.\");\r\n      console.error(\"Error creating service:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6 bg-white shadow-2xl rounded-2xl mt-10\">\r\n      <h2 className=\"text-3xl font-bold mb-6 text-center text-gray-800\">\r\n        <Heading text1=\"Create\" text2=\"New Service\" />\r\n      </h2>\r\n\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        onDragEnter={handleDrag}\r\n        onDragOver={handleDrag}\r\n        onDragLeave={handleDrag}\r\n        onDrop={handleDrop}\r\n        className=\"space-y-6\">\r\n        {/* Title Section */}\r\n        <div>\r\n          <label className=\"block text-xl mulish font-medium text-gray-700 mb-2\">\r\n            Service Title\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Enter Service Title\"\r\n            name=\"title\"\r\n            value={formData.title}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300\"\r\n          />\r\n        </div>\r\n\r\n        {/* Description Section */}\r\n        <div>\r\n          <label className=\"block text-xl mulish font-medium text-gray-700 mb-2\">\r\n            Service Description\r\n          </label>\r\n          <textarea\r\n            name=\"description\"\r\n            placeholder=\"Write a detailed description of the service\"\r\n            value={formData.description}\r\n            onChange={handleChange}\r\n            required\r\n            rows=\"4\"\r\n            className=\"w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300\"\r\n          />\r\n        </div>\r\n\r\n        {/* Image Upload Section */}\r\n        <div>\r\n          <label className=\"block text-xl mulish font-medium text-gray-700 mb-1\">\r\n            Service Image\r\n          </label>\r\n          <div\r\n            className={`w-full p-6 border-2 border-dashed rounded-lg text-center transition duration-300 ${\r\n              dragActive ? \"border-blue-600 bg-blue-50\" : \"border-gray-400\"\r\n            }`}>\r\n            <p className=\"mb-2 text-gray-500\">\r\n              Drag & drop an image here, or{\" \"}\r\n              <span className=\"text-blue-600 underline cursor-pointer\">\r\n                browse\r\n              </span>\r\n            </p>\r\n            <label className=\"inlinetext-xl mulishbg-gray-200 text-gray-800 px-6 py-2 rounded-lg cursor-pointer hover:bg-gray-300 transition duration-200\">\r\n              Choose File\r\n              <input\r\n                type=\"file\"\r\n                name=\"image\"\r\n                accept=\"image/*\"\r\n                onChange={handleChange}\r\n                className=\"hidden\"\r\n              />\r\n            </label>\r\n          </div>\r\n\r\n          {/* Preview Image */}\r\n          {preview && (\r\n            <img\r\n              loading=\"lazy\"\r\n              src={preview}\r\n              alt=\"Preview\"\r\n              className=\"mt-4 rounded-lg w-full h-48 object-cover\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Service Details Section */}\r\n        <div className=\"space-y-6\">\r\n          <label className=\"block text-xl mulish font-semibold text-gray-800 mb-4\">\r\n            Service Details\r\n          </label>\r\n          {formData.details?.map((detail, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"p-6 bg-white shadow-lg rounded-lg border border-gray-200 hover:shadow-xl transition-all duration-300\">\r\n              <div className=\"mb-4\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder={`Heading ${index + 1}`}\r\n                  value={detail.head}\r\n                  onChange={(e) =>\r\n                    handleDetailChange(index, \"head\", e.target.value)\r\n                  }\r\n                  className=\"w-full p-3 border-2 border-gray-300 rounded-lg text-lg font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <textarea\r\n                  placeholder={`Description ${index + 1}`}\r\n                  value={detail.description}\r\n                  onChange={(e) =>\r\n                    handleDetailChange(index, \"description\", e.target.value)\r\n                  }\r\n                  rows=\"4\"\r\n                  className=\"w-full p-3 border-2 border-gray-300 rounded-lg text-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Submit Button */}\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"w-full py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-500 transition duration-300\">\r\n          {loading ? \"Creating...\" : \"Create Service\"}\r\n        </button>\r\n      </form>\r\n\r\n      {/* Message */}\r\n      {message && (\r\n        <p className=\"mt-4 text-center text-sm text-gray-600\">{message}</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewService;\r\n"],"names":["NewService","formData","setFormData","useState","title","description","image","details","head","handleDetailChange","index","field","value","updatedDetails","prev","preview","setPreview","loading","setLoading","message","setMessage","dragActive","setDragActive","handleChange","e","name","files","target","length","handleImage","file","URL","createObjectURL","handleDrag","preventDefault","stopPropagation","type","jsxs","className","children","jsx","Heading","text1","text2","onSubmit","async","data","FormData","append","JSON","stringify","response","fetch","backendurl","method","body","result","json","ok","Error","error","console","onDragEnter","onDragOver","onDragLeave","onDrop","dataTransfer","placeholder","onChange","required","rows","accept","src","alt","map","detail","disabled"],"mappings":"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"}