import{r as e,b as t,j as i,a as s}from"./index.DDD9Gsjv.js";import{H as a}from"./Heading.B7wUWUY9.js";const r=()=>{const[r,l]=e.useState([]),[d,n]=e.useState(!0),[o,c]=e.useState(""),[m,p]=e.useState(null),[x,h]=e.useState(!1),[u,g]=e.useState({title:"",description:"",image:null});e.useEffect(()=>{f()},[]);const f=async()=>{try{const e=await fetch(`${t}/api/services`);if(!e.ok)throw new Error("Failed to fetch services");const i=await e.json();l(i)}catch(e){c(e.message||"Failed to fetch services")}finally{n(!1)}},b=e=>{const{name:t,value:i,files:s}=e.target;g("image"===t?e=>({...e,image:s[0]}):e=>({...e,[t]:i}))};return i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-10",children:[i.jsx(a,{text1:"All",text2:"Services"}),o&&i.jsx("p",{className:"text-center text-red-500",children:o}),d?i.jsx(s,{}):o?i.jsx("p",{className:"text-center text-red-500",children:o}):i.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:r.map(e=>i.jsxs("div",{className:"bg-white shadow-lg rounded-xl overflow-hidden hover:shadow-2xl transition duration-300",children:[e.imageUrl&&i.jsx("img",{loading:"lazy",src:e.imageUrl,alt:e.title,className:"w-full h-48 object-cover"}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),i.jsxs("p",{className:"text-gray-600 mb-4",children:[e.description.split(" ").slice(0,20).join(" "),e.description.split(" ").length>20?"...":""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>(e=>{p(e),g({title:e.title,description:e.description,image:null})})(e),className:"px-4 py-1 bg-yellow-400 rounded-md text-white border-2 border-yellow-400 hover:bg-transparent transition hover:text-yellow-400 text-sm",children:"Edit"}),i.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this service?"))try{if(!(await fetch(`${t}/api/services/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete service");l(t=>t.filter(t=>t._id!==e))}catch(i){alert(i.message||"Failed to delete service.")}})(e._id),className:"px-4 py-1 bg-red-500 text-white rounded-md hover:bg-transparent hover:text-red-500 border-2 border-red-500 transition text-sm",children:"Delete"})]})]})]},e._id))}),m&&i.jsx("div",{className:"fixed inset-0 bg-[#3535357d] flex items-center justify-center z-50",children:i.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!m)return;if(u.image&&u.image.size>5242880)return void alert("Image file is too large. Maximum size is 5MB.");const i=new FormData;i.append("title",u.title),i.append("description",u.description),u.image&&i.append("image",u.image);try{h(!0);const e=await fetch(`${t}/api/services/${m._id}`,{method:"PUT",body:i});if(!e.ok)throw new Error("Failed to update service");const s=await e.json();l(e=>e.map(e=>e._id===s._id?s:e)),p(null)}catch(s){alert(s.message||"Failed to update service.")}finally{h(!1)}},className:"bg-white p-6 rounded-xl shadow-xl w-full max-w-md space-y-4 relative",children:[i.jsx("h2",{className:"text-xl font-bold mb-2",children:"Edit Service"}),i.jsx("input",{type:"text",name:"title",value:u.title,onChange:b,required:!0,placeholder:"Title",className:"w-full p-2 border border-gray-600 rounded-md"}),i.jsx("textarea",{name:"description",value:u.description,onChange:b,rows:4,required:!0,placeholder:"Description",className:"w-full p-2 border border-gray-600 rounded-md"}),i.jsx("input",{type:"file",name:"image",onChange:b,accept:"image/*",className:"cursor-pointer"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:()=>p(null),className:"px-4 py-1 bg-gray-300 rounded-md",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:x,children:x?"Updating...":"Update"})]})]})})]})};export{r as default};
//# sourceMappingURL=AllServices.BojjptdL.js.map
